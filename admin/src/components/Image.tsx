import { Image } from 'antd';
import { ImageProps } from 'rc-image';
import React, { useState } from 'react';

export default function MyImage(
  props: JSX.IntrinsicAttributes & ImageProps & { children?: React.ReactNode },
) {
  const [defaultSrc, setDefaultSrc] = useState('');
  // fallback 会误触发
  return (
    <Image
      {...props}
      {...(defaultSrc ? { src: defaultSrc } : {})}
      onError={e =>
        setDefaultSrc(
          'data:image/png;base64,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',
        )
      }
      placeholder={
        <Image src="https://i1.wp.com/www.cssscript.com/wp-content/uploads/2014/10/iOS-OS-X-Style-Pure-CSS-Loading-Spinner.jpg?fit=400%2C300&ssl=1" />
      }
      //   fallback="data:image/png;base64,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"
    ></Image>
  );
}
